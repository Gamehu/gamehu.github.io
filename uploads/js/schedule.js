(function(){const d={orderBy:"startTime",showLocation:false,offsetMax:72,offsetMin:4,showDeleted:false,singleEvents:true,maxResults:250};Object.assign(d,CONFIG.calendar);const u=new Date;const e=new Date;const t=new Date;e.setHours(u.getHours()+d.offsetMax);t.setHours(u.getHours()-d.offsetMin);const n={key:d.api_key,orderBy:d.orderBy,timeMax:e.toISOString(),timeMin:t.toISOString(),showDeleted:d.showDeleted,singleEvents:d.singleEvents,maxResults:d.maxResults};const s=new URL(`https://www.googleapis.com/calendar/v3/calendars/${d.calendar_id}/events`);Object.entries(n).forEach(e=>s.searchParams.append(...e));function f(e,t){const n=60*1e3;const s=n*60;const a=s*24;const o=a*30;const r=a*365;let i=e-t;const c=i>0?" ago":" later";i=Math.abs(i);if(i<s){return Math.round(i/n)+" minutes"+c}else if(i<a){return Math.round(i/s)+" hours"+c}else if(i<o){return"about "+Math.round(i/a)+" days"+c}else if(i<r){return"about "+Math.round(i/o)+" months"+c}return"about "+Math.round(i/r)+" years"+c}function i(e,t,n,s){const a={weekday:"short",hour:"2-digit",minute:"2-digit"};const o=e==="now"?"NOW":f(u,n);const r=n.toLocaleTimeString([],a)+" - "+s.toLocaleTimeString([],a);let i="";if(d.showLocation&&t.location){i=`<span class="event-location event-details">${t.location}</span>`}let c="";if(t.description){c=`<span class="event-description event-details">${t.description}</span>`}const l=`<section class="event event-${e}">
        <h2 class="event-summary">
          ${t.summary}
          <span class="event-relative-time">${o}</span>
        </h2>
        ${i}
        <span class="event-duration event-details">${r}</span>
        ${c}
      </section>`;return l}function a(){const r=document.querySelector(".event-list");if(!r)return;fetch(s.href).then(e=>{return e.json()}).then(e=>{if(e.items.length===0){r.innerHTML="<hr>";return}r.innerHTML="";let a=0;const o=(new Date).getTimezoneOffset()*6e4;e.items.forEach(e=>{const t=new Date(e.start.dateTime||new Date(e.start.date).getTime()+o);const n=new Date(e.end.dateTime||new Date(e.end.date).getTime()+o);let s="now";if(n<u){s="past"}else if(t>u){s="future"}if(s==="future"&&a<u){r.insertAdjacentHTML("beforeend","<hr>")}r.insertAdjacentHTML("beforeend",i(s,e,t,n));a=n})})}a();const o=setInterval(a,6e4);document.addEventListener("pjax:send",()=>{clearInterval(o)})})();