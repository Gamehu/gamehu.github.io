firebase.initializeApp({apiKey:CONFIG.firestore.apiKey,projectId:CONFIG.firestore.projectId});(function(){const r=(o,r)=>{return o.get().then(e=>{let t=e.exists?e.data().count:0;if(r){t++;o.set({count:t})}return t})};const n=t=>{return e=>{t.innerText=e}};const e=firebase.firestore();const s=e.collection(CONFIG.firestore.collection);document.addEventListener("page:loaded",()=>{if(CONFIG.page.isPost){const t=document.querySelector(".post-title").textContent.trim();const o=s.doc(t);let e=CONFIG.hostname===location.hostname;if(localStorage.getItem(t)){e=false}else{localStorage.setItem(t,true)}r(o,e).then(n(document.querySelector(".firestore-visitors-count")))}else if(CONFIG.page.isHome){const e=[...document.querySelectorAll(".post-title")].map(e=>{const t=e.textContent.trim();const o=s.doc(t);return r(o)});Promise.all(e).then(e=>{const o=document.querySelectorAll(".firestore-visitors-count");e.forEach((e,t)=>{n(o[t])(e)})})}})})();